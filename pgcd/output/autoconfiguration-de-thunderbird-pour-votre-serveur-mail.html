<!DOCTYPE html>
<html lang="fr">
<head>
        <meta charset="utf-8" />
        <title>Autoconfiguration de Thunderbird pour votre serveur mail</title>
        <link rel="shortcut icon" href="./theme/images/icons/atom.jpg" />
        <link rel="stylesheet" href="./theme/css/main.css" />
        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body"  >
                <h1><a href="./">Le Parti des Geeks Cartésiens Démocrates</a></h1>
                <center><a id="title_logo" href="./"><img src="./theme/images/icons/atom_big.png" /></a></center>
 <strong>Blog universitaire d'un groupe de potes passionnés</strong>                <nav><ul>
                    <li><a href="./category/annonces.html">Annonces</a></li>
                    <li class="active"><a href="./category/auto-hebergement.html">Auto-hébergement</a></li>
                    <li><a href="./category/hacking.html">Hacking</a></li>
                    <li><a href="./category/logiciels-libres.html">Logiciels Libres</a></li>
                    <li><a href="./category/philosophie.html">Philosophie</a></li>
                    <li><a href="./category/physique.html">Physique</a></li>
                    <li><a href="./category/reseaux.html">Réseaux</a></li>
                    <li><a href="./category/securite.html">Sécurité</a></li>
                <li><a href="./tag/tutoriel.html">Tutoriels</a></li>
<span id="pages">
                    <li><a href="./pages/contact.html">Contact</a></li>
                    <li><a href="./pages/publications.html">Publications</a></li>
                </span>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
                    <img src="./images/2014/thunderbird-head.png" id="logo_article"/>
      <h1 class="entry-title">
        <a href="./autoconfiguration-de-thunderbird-pour-votre-serveur-mail.html" rel="bookmark"
           title="Permalink to Autoconfiguration de Thunderbird pour votre serveur mail">Autoconfiguration de Thunderbird pour votre serveur mail</a></h1>
    </header>
    <div class="entry-content">
      <hr/>
<footer class="post-info">
        <abbr class="published" title="2014-11-27T19:58:00+01:00">
                Publié : jeu. 27 novembre 2014
        </abbr>

        <address class="vcard author">
                Par                         <a class="url fn" href="./author/matlink.html">Matlink</a>
        </address>
<p>Dans <a href="./category/auto-hebergement.html">Auto-hébergement</a>. </p>
<p>tags: <a href="./tag/tutoriel.html">tutoriel</a> </p>
</footer><!-- /.post-info -->      <div style="clear:both;"></div>
      <p>Si vous gérez un serveur mail, qu'il soit chez vous ou bien hébergé chez
un fournisseur, vous vous êtes sûrement rendus compte quand vous
configuriez un logiciel de messagerie comme Thunderbird, que vous deviez
rentrer toutes les infos à la main (serveur entrant, serveur sortant,
ports, type de connexion chiffrée, ...). Quand on connaît ces infos, au
final, c'est pas très grave. Le problème est que si nous ne sommes pas
le seul à utiliser notre serveur mail (dans le cas où nous fournissons
une ou plusieurs adresses à d'autres personnes), les autres utilisateurs
ne sont pas forcément avertis concernant la configuration à entrer pour
leur client mail.</p>
<p>Sachez donc que Thunderbird (que j'utilise et adore) propose un système
d'auto-configuration. En réalité, il procède en plusieurs étapes
(supposons que l'adresse mail est foo@example.com):</p>
<ol>
<li>recherche du fichier example.com.xml dans le dossier d'installation
   de Thunderbird (<em>dossierinstallation</em>/isp/example.com.xml exactement)</li>
<li>recherche du nom de domaine autoconfig.example.com</li>
<li>recherche "example.com" dans la base de données de Mozilla concernant
   les fournisseurs de mail</li>
<li>recherche de "MX example.com" au niveau du DNS, et pour
   mx1.mail.hoster.com, recherche de "hoster.com" dans la base de
   données de Mozilla</li>
<li>essaye de deviner des noms courants (imap.example.com,
   smtp.example.com, ...)</li>
</ol>
<p>Je vais pas détailler chaque point, mais il faut savoir que dès que
Thunderbird trouve une configuration dans l'un des points, il s'arrête
et la propose à l'utilisateur.</p>
<p>Le premier point n'est pas envisageable car évidement cela requiert que
chaque utilisateur récupère le fichier de configuration et le mette dans
le bon dossier. Le deuxième demande de toucher aux configurations DNS,
choses auxquelles nous n'avons pas toujours accès (et que parfois nous
voulons laisser telles quelles). La troisième demande de faire une
demande à Mozilla pour l'ajouter dans sa base de données, pas pratique
et peut prendre du temps, sachant que Mozilla privilégie les plus gros.</p>
<p>Il nous reste que la quatrième solution (la cinquième n'en est pas une
car ceci est une recherche des noms courants). Il y a un moyen simple de
proposer l'auto-configuration pour Thunderbird, c'est de placer le
fichier de configuration du client mail à cette adresse :
http://example.com/.well-known/autoconfig/mail/config-v1.1.xml.</p>
<p>Et le fichier doit être ainsi :</p>
<div class="highlight"><pre><span class="nt">&lt;clientConfig</span> <span class="na">version=</span><span class="s">&quot;1.0&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;emailProvider</span> <span class="na">id=</span><span class="s">&quot;matlink.fr&quot;</span><span class="nt">&gt;</span>
          <span class="nt">&lt;domain&gt;</span>matlink.fr<span class="nt">&lt;/domain&gt;</span>
          <span class="nt">&lt;displayName&gt;</span>Messagerie Matlink<span class="nt">&lt;/displayName&gt;</span>
          <span class="nt">&lt;displayShortName&gt;</span>MATLINK<span class="nt">&lt;/displayShortName&gt;</span>
          <span class="nt">&lt;incomingServer</span> <span class="na">type=</span><span class="s">&quot;imap&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;hostname&gt;</span>fr.matlink.fr<span class="nt">&lt;/hostname&gt;</span>
                <span class="nt">&lt;port&gt;</span>993<span class="nt">&lt;/port&gt;</span>
                <span class="nt">&lt;socketType&gt;</span>SSL<span class="nt">&lt;/socketType&gt;</span>
                <span class="nt">&lt;username&gt;</span>%EMAILLOCALPART%<span class="nt">&lt;/username&gt;</span>
                <span class="nt">&lt;authentication&gt;</span>plain<span class="nt">&lt;/authentication&gt;</span>
          <span class="nt">&lt;/incomingServer&gt;</span>
          <span class="nt">&lt;outgoingServer</span> <span class="na">type=</span><span class="s">&quot;smtp&quot;</span><span class="nt">&gt;</span>
                <span class="nt">&lt;hostname&gt;</span>fr.matlink.fr<span class="nt">&lt;/hostname&gt;</span>
                <span class="nt">&lt;port&gt;</span>465<span class="nt">&lt;/port&gt;</span>
                <span class="nt">&lt;socketType&gt;</span>SSL<span class="nt">&lt;/socketType&gt;</span>
                <span class="nt">&lt;authentication&gt;</span>plain<span class="nt">&lt;/authentication&gt;</span>
                <span class="nt">&lt;username&gt;</span>%EMAILLOCALPART%<span class="nt">&lt;/username&gt;</span>
          <span class="nt">&lt;/outgoingServer&gt;</span>
    <span class="nt">&lt;/emailProvider&gt;</span>
<span class="nt">&lt;/clientConfig&gt;</span>
</pre></div>


<p>en remplaçant bien sûr les données de mon serveur par celles du votre.
Et voilà, les nouveaux comptes pour ce nom de domaine seront
automatiquement configurés pour Thunderbird (et à priori c'est le seul
bon client mail à pouvoir faire ça, avec Outlook de
Microsoft).</p>
<p><center><img alt="config-found" src="./images/2014/config-found.png" /></center></p>
<p><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Thunderbird/Autoconfiguration">sources</a></p>
    </div>
      <div style="clear:both;"></div>
      <hr/><!-- /.entry-content -->
<script data-isso="//fr.matlink.fr/comments/" src="//fr.matlink.fr/comments/js/embed.min.js"></script><hr /><section id="isso-thread"></section>
<noscript>les commentaires de ce site utilisent javascript</noscript>
  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>blogroll</h2>
                        <ul>
                            <li><a href="http://getpelican.com/"><img src="./theme/images/icons/pelican_logo.png" />  Pelican</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="https://twitter.com/M4tlink">Twitter</a></li>
                            <li><a href="https://www.facebook.com/partigeekscartesiensdemocrates">Facebook</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                <center>Tous les articles sont publiés sous licence <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><img src="./theme/images/icons/cc-by-nc-sa.png" alt="CC-BY-NC-SA"></a></center>
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->

    <script type="text/javascript">
        var pkBaseURL = "fr.matlink.fr/piwik";
    var _paq = _paq || [];
    _paq.push(["trackPageView"]);
    _paq.push(["enableLinkTracking"]);
    (function() {
        var u=(("https:" == document.location.protocol) ? "https" : "http")+"://"+pkBaseURL+"/";
        _paq.push(["setTrackerUrl", u+"piwik.php"]);
        _paq.push(["setSiteId", "1"]);
        var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
        g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
    })();
    </script>
</body>
</html>